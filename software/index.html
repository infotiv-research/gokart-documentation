
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="INFOTIV">
      
      
        <link rel="canonical" href="https://infotiv-research.github.io/gokart-documentation/software/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.11">
    
    
      
        <title>Software Repositories - Infotiv Autonomous Platform</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c5ef100.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gokart-body-electronics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Infotiv Autonomous Platform" class="md-header__button md-logo" aria-label="Infotiv Autonomous Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Infotiv Autonomous Platform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Software Repositories
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/infotiv-research/gokart-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    infotiv-research/gokart-documentation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Infotiv Autonomous Platform" class="md-nav__button md-logo" aria-label="Infotiv Autonomous Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Infotiv Autonomous Platform
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/infotiv-research/gokart-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    infotiv-research/gokart-documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../scope/" class="md-nav__link">
        Scope and Goal
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../platform/" class="md-nav__link">
        Automotive Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bodyelec/" class="md-nav__link">
        Body Electronics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../autonomous/" class="md-nav__link">
        Autonomous Drive
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Components" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        HW and Board Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/" class="md-nav__link">
        Interfaces and Sensors
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Software Repositories
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Software Repositories
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vcu" class="md-nav__link">
    VCU
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cem-for-infotiv-ap-gokart-and-cem" class="md-nav__link">
    CEM for Infotiv AP Gokart and CEM
  </a>
  
    <nav class="md-nav" aria-label="CEM for Infotiv AP Gokart and CEM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-view-controller" class="md-nav__link">
    Model-view-controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssm" class="md-nav__link">
    SSM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dim-code" class="md-nav__link">
    DIM code
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Usage Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Usage Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../start/" class="md-nav__link">
        Start the GoKart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../issues-todo/" class="md-nav__link">
        Common Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev/" class="md-nav__link">
        For Developers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../projects/" class="md-nav__link">
        Thesis Projects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contact/" class="md-nav__link">
        Contact Infotiv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../terms/" class="md-nav__link">
        Glossary of Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        ChangeLog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vcu" class="md-nav__link">
    VCU
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cem-for-infotiv-ap-gokart-and-cem" class="md-nav__link">
    CEM for Infotiv AP Gokart and CEM
  </a>
  
    <nav class="md-nav" aria-label="CEM for Infotiv AP Gokart and CEM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-view-controller" class="md-nav__link">
    Model-view-controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssm" class="md-nav__link">
    SSM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dim-code" class="md-nav__link">
    DIM code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/infotiv-research/gokart-documentation/edit/master/docs/software.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="gokart-body-electronics">Gokart Body Electronics<a class="headerlink" href="#gokart-body-electronics" title="Permanent link">&para;</a></h1>
<h4 id="vcu"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart-BE/cantx-rig">VCU</a><a class="headerlink" href="#vcu" title="Permanent link">&para;</a></h4>
<p>stm32f103board</p>
<p>The VCU is continuously sending wheel speed data to the CAN-bus. It is listening to the CAN bus for speed and turn rate requests and sends them to the PID which eventually modifies the values.</p>
<h4 id="cem-for-infotiv-ap-gokart-and-cem"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart-BE/gk-cem">CEM for Infotiv AP Gokart</a> and <a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/cem">CEM</a><a class="headerlink" href="#cem-for-infotiv-ap-gokart-and-cem" title="Permanent link">&para;</a></h4>
<p>The CEM listens to the CAN bus and analyses each message. Based on a list of signals it matches the messages to a certain instruction, e.g. a certain message type is set speed, so it forwards the message onto the propulsion CAN bus for the VCU to handle. The CEM is the central module that keeps track of the state of the entire platform.</p>
<h5 id="model-view-controller">Model-view-controller<a class="headerlink" href="#model-view-controller" title="Permanent link">&para;</a></h5>
<p>The CEM and SSM are both coded in C++ in the Infotiv Embedded Framework. The system architecture used is Model-view-controller (MVC), a software pattern that aims at separating the data (model) from the parts of the code that alters the data (controller), as well as the presentation of the data (view).</p>
<p>In a typical scenario a user gives input to a program on a computer. This input is handled by the controllers methods to manipulate the data in the model. Model is invisible for the user, but the model is responsible for updating view, which is the graphical interface for feedback to the user. In view the data is rendered to a suitable representation for the user.
The main argument for separating data from presentation is to avoid that changes in the presentation layer have consequences for the handling of data, and vice versa.
MVC is a design pattern that can vary a lot depending on the application. In the case of the CEM, where the presentation of the data could be said to lie in the physical body electronics outside of the microcontroller, a view layer in the code would be unnecessary. Worth noting is also that the input to the controller of the CEM does not come directly from the user, but from some other external unit, like the ADAS, VCU or DIM, which all have their own models and controllers. The user is in other words one ore more steps away compared to the typical scenario above.</p>
<p><img alt="CEM code structure.!" src="../assets/images/cem-code.png" title="CEM code structure." /></p>
<p>A takeaway is that when it comes to the models, even though there are more than one model, they all point back to the one instance of the deviceModel that is initialized by the CemModel. The DeviceModel is the register of the CAN-bus(es) and its signals and frames, and when initiated, the data that each signal holds.
Looking at the controllers, there is a similar hierarchy in how the CemController has its only function to initialize all the other controllers. Also note that it points to the CemModel to make sure that the signals controlled are those in the one instance of the deviceModel.
The main code is simple – after initializing a cemModel and cemController that initializes everything else, the code iterates over a list of all controllers and calls their update-functions.</p>
<h4 id="ssm">SSM<a class="headerlink" href="#ssm" title="Permanent link">&para;</a></h4>
<p>The ECU responsible for handling the sonar sensors and putting their distance data on the CAN-bus follows the same MVC architecture (without view) as the CEM, only much simpler, with just a SonarModel that points at the DeviceModel, and a SonarController that manipulates the data in the SonarModel.</p>
<h4 id="dim-code">DIM code<a class="headerlink" href="#dim-code" title="Permanent link">&para;</a></h4>
<p><img alt="Powermode display and selector buttons, a.k.a DIM.!" src="../assets/images/dim.png" title="Powermode display and selector buttons, a.k.a DIM." /></p>
<p>The Powermode display is built on an arduino nano with C code including the transmit/receive configuration for the CAN communication to the MCP2515 underneath the Powermode buttons.</p>
<h1 id="gokart-platform">GoKart Platform<a class="headerlink" href="#gokart-platform" title="Permanent link">&para;</a></h1>
<h4 id="gokart_vcu"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart_vcu">Gokart_VCU</a><a class="headerlink" href="#gokart_vcu" title="Permanent link">&para;</a></h4>
<h4 id="adas">[ADAS]<a class="headerlink" href="#adas" title="Permanent link">&para;</a></h4>
<p>On boot the ADAS launches its server. The server script, car_server.py, starts two threads, one publisher thread and one reply thread. The publisher thread publishes sensor data and the reply thread awaits commands and then executes the commands. 
The two reply threads are used for slightly different things. One is used to send set speed/turn rate commands to the ADAS and to forward I/O messages to the CEM. The other is used to send config data to whatever infotainment system require it.</p>
<h4 id="adas_dk"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/adas_dk">adas_dk</a><a class="headerlink" href="#adas_dk" title="Permanent link">&para;</a></h4>
<p>The ADAS  software is written in Python while the ADAS DK aswell as the other ECU’s software is written in c++. </p>
<h4 id="bms"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/bms">bms</a><a class="headerlink" href="#bms" title="Permanent link">&para;</a></h4>
<p>The BMS is continuously sending information regarding voltage and current onto the CAN bus. It is also listening on the CAN bus for power mode signals which it handles by switching relays in order to give power to the motor.</p>
<h4 id="sw-drivers">SW drivers<a class="headerlink" href="#sw-drivers" title="Permanent link">&para;</a></h4>
<p>Drivers for the CAN-Bus module need to be installed on the raspberry.
The drivers as well as instructions on how to install them are available at the infotiv wiki:<br />
https://wiki.infotivlab.se/bin/view/Autonomous%20Platform/Configuring%20CAN%20on%20Raspberry%20Pi/</p>
<h4 id="gokart_signal_db"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart_signal_db">gokart_signal_db</a><a class="headerlink" href="#gokart_signal_db" title="Permanent link">&para;</a></h4>
<p>Signal database for CAN bus of the IES gokart.</p>
<p>The signal database is an excel file, containing signal and frame definitions for
the CAN bus. Signals are all the data that can be communicated, and the 
frames are how it's done.</p>
<p>The name and description is for developer use mostly. 
The ID is in hex, and needs to be unique for the bus. To add signals to the frame, 
add the signal indexes from the 'signals' sheet to the 'signals' column as a 
comma separated list.</p>
<p>The 'Period' column specifies the rate at which the data should be sent, where a 
period of 0.01 is equivalent to 100 Hz.</p>
<p>The 'Bus' column is used to differentiate buses in the case there are several on 
the platform. At the time of writing there is only one, so this can always be left as 1.</p>
<h4 id="roscanbus"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/roscanbus">RosCanBus</a><a class="headerlink" href="#roscanbus" title="Permanent link">&para;</a></h4>
<p>A CAN bus ROS node that will transcode CAN signals to ROS topics according to a predefined CAN database.</p>
<h4 id="car-controller"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/car_controller">Car Controller</a><a class="headerlink" href="#car-controller" title="Permanent link">&para;</a></h4>
<p>This repository consists of all files required to make the CarController python package. This python library contains all the essential functions to send and retrieve data from the autonomous platform while working from a remote client. Through this repo, a python package can be made and installed on the remote client or a laptop. The package acts as a backend communication interface to any commands which the user wants to send from the laptop to the autonomous platform regardles of the hardware on it.</p>
<p>The following features have been tested and functioning:</p>
<p>1) Handles all the wireless communication through <a href="https://github.com/zeromq/pyzmq">zmq</a>
2) Gets the current signal information from the car.
3) The power to the motors can be switched on and off. The speed and turnrate can be set
4) Supports communication with one camera on board.
5) Takes input from the lidar and generates a map through SLAM.
6) When successfully connected to the server on the autonomous platform, this program will send out a heartbeat to indicate the health of the whole ADAS unit.</p>
<h4 id="gokart_controller"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart_controller">Gokart_Controller</a><a class="headerlink" href="#gokart_controller" title="Permanent link">&para;</a></h4>
<p>Python wrapper to communicate with ROS using rospy library.</p>
<h4 id="gokart_power_mode_display"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart_mood_display">Gokart_power_mode_display</a><a class="headerlink" href="#gokart_power_mode_display" title="Permanent link">&para;</a></h4>
<h4 id="nvidia-jetson-setup-files-gokart_setup"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart_setup">NVIDIA Jetson Setup files, gokart_setup</a><a class="headerlink" href="#nvidia-jetson-setup-files-gokart_setup" title="Permanent link">&para;</a></h4>
<p>ROS subproject containing all setup for the gokart. (Configuration files, script to launch services on startup )</p>
<p>This repo contains the launch files for starting the Cartographer nodes.<br />
It also contains the systemd services used for running <code>roscore</code>, <code>rplidar</code>, and <code>usb_cam</code>.<br />
There is a file in the services folder which defines udev rules, which allow us to bind the<br />
lidars to /dev/lidar/* which is convenient.</p>
<p>The <code>urdf</code> folder contains the URDF (Universal Robot Definition File) for the gokart.</p>
<p>The main launch file used is <code>dobby.launch</code>. It will connect to the cars sensors<br />
and start up a graphical session in rviz displaying the Cartographer node's work.</p>
<h4 id="cartographer_ws"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/cartographer_ws">cartographer_ws</a><a class="headerlink" href="#cartographer_ws" title="Permanent link">&para;</a></h4>
<p>ROS workspace to get cartographer up and running with the IES gokart.</p>
<p>This is intended to be run on a laptop which connects to the gokart over wifi,<br />
not on the gokart itself. Cartographer can certainly run on the gokart, but<br />
this repositories scripts assume that you have a graphical user interface.  </p>
<p>Note that this project contains subrepositories! Remember to initialize them
using<br />
<code>git submodule update --init</code></p>
<p>There are some shell scripts to help you out when getting started:</p>
<ul>
<li><strong>get_carto.sh</strong> will download all files required to build cartographer</li>
<li><strong>build_carto.sh</strong> will build the downloaded files</li>
<li><strong>run_carto.sh</strong> will run the cartographer nodes</li>
</ul>
<h4 id="sonar-sensor-module-for-gokart"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/gokart-ssm">Sonar Sensor Module for Gokart</a><a class="headerlink" href="#sonar-sensor-module-for-gokart" title="Permanent link">&para;</a></h4>
<h4 id="urdf-file"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/gokart/urdf">urdf file</a><a class="headerlink" href="#urdf-file" title="Permanent link">&para;</a></h4>
<p>This repo contains the URDF file for the gokart.</p>
<p>The URDF contains all geometrical definitions needed for the robot; eg where all the sensors are mounted.</p>
<p>http://wiki.ros.org/urdf/Tutorials/Create%20your%20own%20urdf%20file</p>
<h1 id="rp">RP !?<a class="headerlink" href="#rp" title="Permanent link">&para;</a></h1>
<h4 id="tem"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/tem">TEM</a><a class="headerlink" href="#tem" title="Permanent link">&para;</a></h4>
<p>This camera submodule should be run on the Raspberry Pi, server running on port 5557
Follow instruction to enable CAN drivers on Raspberry Pi</p>
<h4 id="lidarserver"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/lidarserver">lidarServer</a><a class="headerlink" href="#lidarserver" title="Permanent link">&para;</a></h4>
<p>publish_port = 5553
command_port = 5554</p>
<h4 id="researchplatform"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/researchplatform">researchplatform</a><a class="headerlink" href="#researchplatform" title="Permanent link">&para;</a></h4>
<p>running on PI</p>
<h4 id="ros-platform"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/rosplatform">ROS platform</a><a class="headerlink" href="#ros-platform" title="Permanent link">&para;</a></h4>
<h4 id="camera-server"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/camera_server">camera Server</a><a class="headerlink" href="#camera-server" title="Permanent link">&para;</a></h4>
<p>This camera submodule should be run on the Raspberry Pi, running on port 5557</p>
<p>Also see<a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/camera_view">camera_view</a></p>
<h4 id="car_protobufs"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/car_protobufs">car_protobufs</a><a class="headerlink" href="#car_protobufs" title="Permanent link">&para;</a></h4>
<h4 id="car_server"><a href="https://gitlab.infotivlab.se/internal-development/autonomous-platform/car_server">Car_server</a><a class="headerlink" href="#car_server" title="Permanent link">&para;</a></h4>
<p>See diagrams in the note folder</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../interfaces/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Interfaces and Sensors" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Interfaces and Sensors
            </div>
          </div>
        </a>
      
      
        
        <a href="../start/" class="md-footer__link md-footer__link--next" aria-label="Next: Start the GoKart" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Start the GoKart
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.748e2769.min.js"></script>
      
    
  </body>
</html>