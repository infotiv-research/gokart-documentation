<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="INFOTIV" /><link rel="canonical" href="https://infotiv-research.github.io/gokart-documentation/platform/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Automotive Platform - Infotiv Autonomous Platform</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Automotive Platform";
        var mkdocs_page_input_path = "platform.md";
        var mkdocs_page_url = "/gokart-documentation/platform/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Infotiv Autonomous Platform
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scope/">Scope and Goal</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Automotive Platform</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#ecu-function-level">ECU function level</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cem">CEM</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adas">ADAS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#bms">BMS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ecmvcu">ECM/VCU</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tem">TEM</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#obc">OBC</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dcdc">DC/DC</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ihu-part-of-physical-tem">IHU (Part of physical TEM)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#external-infotainment-system">External Infotainment System</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#software-level">Software Level</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#adas_1">ADAS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cem_1">CEM</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#vcu">VCU</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#bms_1">BMS</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bodyelec/">Body Electronics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../autonomous/">Autonomous Drive</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Components</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../components/">HW and Board Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../interfaces/">Interfaces and Sensors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../software/">Software Repositories</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage Manual</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../start/">Start the GoKart</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../issues-todo/">Common Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev/">For Developers</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../projects/">Thesis Projects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../project-proposal/">Project Projects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contact/">Contact Infotiv</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../terms/">Glossary of Terms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">ChangeLog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Infotiv Autonomous Platform</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Architecture &raquo;</li><li>Automotive Platform</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/infotiv-research/gokart-documentation/edit/master/docs/platform.md"> Edit on infotiv-research/gokart-documentation</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="automotive-platform-ecus">Automotive Platform ECUs<a class="headerlink" href="#automotive-platform-ecus" title="Permanent link">&para;</a></h1>
<p>Automotive Platform consist of several ECUs and the purpose of these ECUs (CEM, ADAS, BMS, ECM/VCU, OBC, DC/DC, IHU, TEM) are best described in <code>/protectedDocuments/Infotiv Research and Education Go-kart Platform/Old Product &amp; Functional Description of IES Education platform.docx</code> <strong>(<a href="../contact/">Protected document</a>)</strong></p>
<p>System Overview:
<img alt="System Overview!" src="../assets/images/system-overview.png" title="System Overview" /></p>
<p>The platform includes three different CAN bus-systems:</p>
<ul>
<li>Propulsion CAN</li>
<li>Safety CAN</li>
<li>Infotainment CAN</li>
</ul>
<p>The communication between these three CAN buses shall all be routed through the CEM, which will act as gateway and general body electronics module.</p>
<h2 id="ecu-function-level">ECU function level<a class="headerlink" href="#ecu-function-level" title="Permanent link">&para;</a></h2>
<h3 id="cem">CEM<a class="headerlink" href="#cem" title="Permanent link">&para;</a></h3>
<ul>
<li>Gateway functionality between the three buses</li>
</ul>
<h3 id="adas">ADAS<a class="headerlink" href="#adas" title="Permanent link">&para;</a></h3>
<ul>
<li>Read input from ADAS sensors (Ultrasonic, Vision, LIDAR, Radar)</li>
<li>Copy functionality from previous car platforms and educations regarding ADAS sensors</li>
<li>Be able to send propulsive request to the ECM/VCU (through CEM)</li>
</ul>
<h3 id="bms">BMS<a class="headerlink" href="#bms" title="Permanent link">&para;</a></h3>
<ul>
<li>Read battery voltage (generate simplified SOC)</li>
<li>Be able to control HV-battery contactors (on/off)</li>
<li>Be able to communicate with CEM and ECM/VCU<ul>
<li>SOC value </li>
<li>Battery contactor status</li>
<li>etc</li>
</ul>
</li>
</ul>
<h3 id="ecmvcu">ECM/VCU<a class="headerlink" href="#ecmvcu" title="Permanent link">&para;</a></h3>
<ul>
<li>Be able to control electrical motors 1, 2, 3 and 4 (speed and steering angle)</li>
<li>Receive input from all ECUs (from CEM)</li>
<li>Output applicable signals to ADAS (through CEM) and BMS (directly)</li>
<li>Measure speed via speedometer wheel sensors</li>
</ul>
<h3 id="tem">TEM<a class="headerlink" href="#tem" title="Permanent link">&para;</a></h3>
<ul>
<li>Receive selected signals via CEM</li>
<li>Output above signals via WiFi to be able to be received by Android APP</li>
<li>Receive signals via WiFi to be sent via CEM to ECM/VCU<ul>
<li>Emergency STOP (vehicle speed = 0)</li>
</ul>
</li>
<li>Basic communication with ADAS through Ethernet</li>
</ul>
<h3 id="obc">OBC<a class="headerlink" href="#obc" title="Permanent link">&para;</a></h3>
<ul>
<li>Connection to BMS via LIN through ECM/VCU</li>
<li>Physical connection to HV-battery</li>
</ul>
<h3 id="dcdc">DC/DC<a class="headerlink" href="#dcdc" title="Permanent link">&para;</a></h3>
<ul>
<li>Connection to BMS via LIN through ECM/VCU</li>
<li>Physical connection to HV-battery</li>
<li>Physical connection to LV-battery</li>
</ul>
<h3 id="ihu-part-of-physical-tem">IHU (Part of physical TEM)<a class="headerlink" href="#ihu-part-of-physical-tem" title="Permanent link">&para;</a></h3>
<ul>
<li>Output signals via WiFi to be able to be received by external IHU</li>
</ul>
<h3 id="external-infotainment-system">External Infotainment System<a class="headerlink" href="#external-infotainment-system" title="Permanent link">&para;</a></h3>
<ul>
<li>DIM (Drive Information Module)</li>
<li>IHU (Infotainment Head Unit)</li>
</ul>
<p>Schematic (Kicad) for ADAS and VCU <code>protectedDocuments/2019 - Praktik, Elschema och BOM för bilpltform/Platform V1/Kicad/Schematics</code> <strong>(<a href="../contact/">Protected document</a>)</strong></p>
<pre><code class="language-txt"> ADAS-cache.lib            'Blinkers fram.sch-bak'   DC-DC-cache.lib
 ADAS.pro                   BMS-cache.lib           'DC-DC converter.pro'
 ADAS-rescue.dcm            BMS.pro                  DC-DC.pro
 ADAS-rescue.lib            BMS.sch                  DC-DC.sch
 ADAS.sch                   CAN-BUS-cache.lib        DC-DC.sch-bak
 ADAS.sch-bak               CAN-BUS.pro              sym-lib-table
 BlinkersBak-cache.lib      CAN-BUS.sch              VCU-cache.lib
 BlinkersBak.pro            CAN-BUS.sch-bak          VCU.pro
 BlinkersBak.sch            CEM-cache.lib            VCU.sch
'Blinkers fram-cache.lib'   CEM.pro                  VCU.sch-bak
'Blinkers fram.pro'         CEM.sch
'Blinkers fram.sch'         CEM.sch-bak
</code></pre>
<p>Schematic ( PDF format) for ADAS, VCU, BMS, CAN Interface <code>protectedDocuments/2019 - Praktik, Elschema och BOM för bilplatform/Platform V2</code> <strong>(<a href="../contact/">Protected document</a>)</strong></p>
<ul>
<li>ADAS.pdf</li>
<li>BMS.pdf</li>
<li>CAN-BUS.pdf</li>
<li>CEM.pdf</li>
<li>DC-DC.pdf</li>
<li>VCU.pdf</li>
</ul>
<h2 id="software-level">Software Level<a class="headerlink" href="#software-level" title="Permanent link">&para;</a></h2>
<p>The ADAS software is written in Python while the ADAS DK aswell as the other ECU’s software is written in c++. </p>
<h3 id="adas_1">ADAS<a class="headerlink" href="#adas_1" title="Permanent link">&para;</a></h3>
<p>On boot the ADAS launches its server. The server script, car_server.py, starts two threads, one publisher thread and one reply thread. The publisher thread publishes sensor data and the reply thread awaits commands and then executes the commands. 
The two reply threads are used for slightly different things. One is used to send set speed/turn rate commands to the ADAS and to forward I/O messages to the CEM. The other is used to send config data to whatever infotainment system require it.</p>
<h3 id="cem_1">CEM<a class="headerlink" href="#cem_1" title="Permanent link">&para;</a></h3>
<p>The CEM listens to the CAN bus and analyses each message. Based on a list of signals it matches the messages to a certain instruction, e.g. a certain message type is set speed, so it forwards the message onto the propulsion CAN bus for the VCU to handle. The CEM is the central module that keeps track of the state of the entire platform.</p>
<h3 id="vcu">VCU<a class="headerlink" href="#vcu" title="Permanent link">&para;</a></h3>
<p>The VCU is continuously sending wheel speed data to the CAN-bus. It is listening to the CAN bus for speed and turn rate requests and sends them to the PID which eventually modifies the values.</p>
<h3 id="bms_1">BMS<a class="headerlink" href="#bms_1" title="Permanent link">&para;</a></h3>
<p>The BMS is continuously sending information regarding voltage and current onto the CAN bus. It is also listening on the CAN bus for power mode signals which it handles by switching relays in order to give power to the motor.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../scope/" class="btn btn-neutral float-left" title="Scope and Goal"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../bodyelec/" class="btn btn-neutral float-right" title="Body Electronics">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../scope/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../bodyelec/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
